<div id="admin-panel" class="admin-area">
    <h3>老師管理後台</h3>
    
    <div class="input-group">
        <label>發布新功課</label>
        <textarea id="admin-hw-input" rows="4" placeholder="請輸入今日功課內容..."></textarea>
        <button class="btn" onclick="publishHomework()">發布並存檔</button>
    </div>

    <hr>

    <h4>今日家長簽名統計與留言</h4>
    <div id="stats-display"></div>
    
    <div id="records-list" style="margin-top: 20px;">
        </div>
</div>

<script>
// 當老師登入後，呼叫此函數顯示所有家長的簽名內容
function renderTeacherView(records) {
    const listContainer = document.getElementById('records-list');
    listContainer.innerHTML = ''; // 清空舊資料

    if (records.length === 0) {
        listContainer.innerHTML = '<p style="text-align:center; color:gray;">目前尚無家長簽名</p>';
        return;
    }

    records.forEach(record => {
        const card = document.createElement('div');
        card.className = 'record-card';
        card.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 1px dashed #eee; padding-bottom: 8px; margin-bottom: 8px;">
                <strong>座號 ${record.studentId} - ${record.studentName}</strong>
                <span style="font-size: 0.8em; color: #888;">${record.time}</span>
            </div>
            
            <div style="margin-bottom: 10px;">
                <label style="font-size: 0.85em; color: #666;">家長留言：</label>
                <div style="background: #fdfdfd; padding: 8px; border-radius: 4px; border: 1px solid #f0f0f0;">
                    ${record.comment ? record.comment : '<span style="color: #ccc;">（無留言）</span>'}
                </div>
            </div>

            <div>
                <label style="font-size: 0.85em; color: #666;">家長簽名圖片：</label>
                <div style="background: white; border: 1px solid #eee; text-align: center; padding: 5px;">
                    <img src="${record.signature}" style="max-width: 100%; height: auto; display: block; margin: 0 auto;" alt="家長簽名">
                </div>
            </div>

            <button class="delete-btn" onclick="deleteRecord('${record.id}')">刪除此筆簽名紀錄</button>
        `;
        listContainer.appendChild(card);
    });
}

// 模擬刪除功能
function deleteRecord(recordId) {
    if (confirm("確定要刪除這筆家長簽名與留言嗎？此動作無法復原。")) {
        // 這裡未來會加入 Firebase 的刪除語法：
        // db.collection('responses').doc(recordId).delete();
        alert("已成功刪除該筆資料");
        // 刪除後重新整理清單
        refreshStats(); 
    }
}
</script>
